var $ = require('jquery');// var date = new Date(Date.now()-30*24*60*60*1000); // A week ago  // unirest.get('http://sanfrancisco.crimespotting.org/crime-data.php?format=json&count=100000&dstart='+dateString+'&dend='+dateString)  //   .header('Accept', 'application/json')  //   .end(function(result) {  //     // Sample entry under array result.body.features:  //     // {"id":"9372974","type":"Feature","geometry":{"type":"Point","coordinates":[-122.409854,37.783386]},"properties":{"crime_type":"SIMPLE ASSAULT","date_time":"2015-03-18 23:55:00","description":"BATTERY (ARREST, BOOKED)","case_number":"150242809","address":null,"zip_code":null,"beat":null,"accuracy":"9"}}  //     var crimes = _.map(result.body.features, function(feature) {  //       return [feature.properties.date_time, feature.properties.description];  //     });  //     res.json(crimes);  //   });exports.lastUpdatedDate = function(callback) {  exports.query(Date.now()-exports.year(), null, 1, callback);};exports.hour = function() {  return 60*60*1000;};exports.day = function() {  return 24*exports.hour();};exports.week = function() {  return 7*exports.day();};exports.month = function() {  return 30*exports.day();};exports.year = function() {  return 365*exports.day();};exports.query = function(dstart, dend, count, callback) {  dstart = dstart || Date.now()-exports.month();  dend = dend || Date.now();  count = count || 100000;  $.ajax({    url: 'http://sanfrancisco.crimespotting.org/crime-data.php',    type: 'GET',    data: {      format: 'json',      count: count,      dstart: exports.toDateString(dstart),      dend: exports.toDateString(dend)    },    contentType: 'application/json',    success: callback,    error: function (data) {      console.error('Failed to get statistics');    }  });};exports.toDateString = function(longDate) {  var date = new Date(longDate);  var dateYear = date.getUTCFullYear();  var dateMonth = date.getUTCMonth()+1 < 10 ? '0'+(date.getUTCMonth()+1) : date.getUTCMonth()+1;  var dateDate = date.getUTCDate() < 10 ? '0'+date.getUTCDate() : date.getUTCDate();  return dateYear+'-'+dateMonth+'-'+dateDate;};